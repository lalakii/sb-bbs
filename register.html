<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimal-ui">
		<title></title>
		<link href="https://cdn.bootcss.com/milligram/1.3.0/milligram.min.css" rel="stylesheet">
		<style>
			html,body{
				background:#000;
			}
		</style>
	</head>
	<body>
		<div id="app" class="container">
			<div class="row">
				<div class="column">
					<h3>
						SB-BBS,The Best BBS.
					</h3>
				</div>
			</div>
			<div class="row">
				<div class="column column-35">
					<h4 style="color:#528B8B">
						注册
					</h4>
				</div>
			</div>
			<hr />
			<div class="row">
				<div class="column">
					<input id="uname" type="text" placeholder="用户名(必填，且不小于8位)" maxlength="18" style="color:green" />
					<input id="upwd" type="password" placeholder="密码(必填)" maxlength="18" style="color:green" />
					<input id="email" type="text" placeholder="邮箱" maxlength="20" style="color:green" />
					<textarea id="udepict" placeholder="简介" maxlength="150" style="color:green"></textarea>
					<input id="issubmit" type="button" value="注册" onclick="register()" style="width:25px;padding-left:8px;background-color:#388E8E;border:0"/>
				</div>
			</div>
			<hr />
			<div class="row">
				<div class="column">
					<a href="login.html">
						已有账号？前往登录
					</a>
				</div>
			</div>
			<div class="row">
				<div class="column">
					<a href="../">
						返回主页
					</a>
				</div>
			</div>
		</div>
		<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js">
		</script>
		<script src="https://cdn.bootcss.com/jquery-cookie/1.4.1/jquery.cookie.min.js">
		</script>
		<script>
			function register() {
				var uname = $("#uname").val();
				var upwd = $("#upwd").val();
				var email = $("#email").val();
				var udepict = $("#udepict").val();
				if (!$.isEmptyObject(uname) && !$.isEmptyObject(upwd) && uname.length>=8) {
					$("#issubmit").attr("disabled",true);
					$.get("./function.php?register={\"uname\":\"" + uname + "\",\"upwd\":\"" + upwd + "\",\"email\":\"" + email + "\",\"udepict\":\"" + udepict + "\"}",
					function(data) {
						if (data == 1) {
							alert("注册成功，跳转至登录。");
							location.href = "login.html";
						}else{
							$("#issubmit").attr("disabled",false);
							alert("该帐号可能已被注册。");
						}
					});
				}else{
					alert("请检查资料(用户名至少8个字符)。");
				}
			}

			$(document).keydown(function(){
				if (event.keyCode == 13) {
					register();
				}
			});
		</script>
	</body>

</html>
